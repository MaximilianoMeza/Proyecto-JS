<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">  

<dom-module id='kata-desafio'>
    <template>
        <style>
        :host {
          display: block;
          }
        </style>
        <h2>Tus Desafios de [[lenguaje]]:</h2>

      <template 
        is="dom-repeat" 
        items="{{desafios}}" 
        as="desafio" 
        filter="{{computeFilter(lenguaje)}}"
      >   
          <paper-item item-name="[[desafio.id]]" >[[desafio.name]]</paper-item>
      </template> 
      <!-- <h3>Detalle del desafio seleccionado:</h3>
      <template is="dom-if" if="[[loadingdd]]">
        <paper-spinner class="spinner" active="[[loadingdd]]"></paper-spinner>
      </template>
      <template is="dom-if" if="[[!loadingdd]]">          
        <div>[[selectedChallengeDetails.description]]</div>
      </template> -->

    </template>

    <script>
    class KataDesafio extends Polymer.Element {
      static get is() { return 'kata-desafio'; }
      static get properties() {
        return {
          desafios: {
          type: Array,
          notify:true,
          value:[]
        },
        lenguaje:{
            type:String,
            value:""
        },
        ultimo: {
            type: Number,
            value: 0
          }
        };
      }

      _toArray(obj) {
        return Object.keys(obj).map(function(key) {
          return {
            title: key,
            value: obj[key]
          };
        });
      } 

      computeFilter(string) {
        console.log("ingreso a filtrar desafios")
                if (!string) {
                    // set filter to null to disable filtering
                    return null;
                } else {
                    // return a filter function for the current search string
                    string = string.toLowerCase();
                    return function (desafio) {
                        var first = desafio.completedLanguages[0].toString() ;
                        return first.indexOf(string) ;
                    };
                }
            }

    }
    window.customElements.define(KataDesafio.is, KataDesafio);

    
    </script>

</dom-module>